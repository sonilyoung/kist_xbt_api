<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.adm.eduMgr.dao.EduMgrDAO">
	
	<!-- 교육관리-->
		
	<!-- 교육과정관리-그룹관리 조회-->
	<select id="selectBaselineList" parameterType="egovframework.com.adm.eduMgr.vo.Baseline" resultType="egovframework.com.adm.eduMgr.vo.Baseline" >			
         
		SELECT PROC_CD
			,PROC_YEAR
			,PROC_SEQ
			,MODULE_ID
			,EDU_START_DATE
			,EDU_END_DATE
			,TOT_STUDY_DATE
			,LIMIT_PERSON_CNT
			,ENDING_STD_SCORE
			,ENDING_PROCESS_END_YN
			,INSERT_DATE
			,INSERT_ID
			,UPDATE_DATE
			,UPDATE_ID
		FROM XBT_BASELINE
         
        <!--
		<choose>
			<when test='searchType == "1"'>
	            AND TA1.PARENT_PROC_GROUP_CD = '*'                                                  /* 상위과정분류코드 */
	            AND TA1.TOP_PROC_GROUP_CD    = '*'                                                  /* 최상위과정분류코드 */			
			</when>
			<when test='searchType == "2"'>
				AND TA1.PARENT_PROC_GROUP_CD = #{procGroupCd}/* 상위과정분류코드 */
			</when>
			<when test='searchType == "1"'>
				AND TA1.PARENT_PROC_GROUP_CD = #{procGroupCd}                                                  /* 상위과정분류코드 */	
			</when>			
		</choose>	
		  --> 	         
	</select>  
	
	
	<!-- 차수 상세 -->
	<select id="selectBaseline" parameterType="egovframework.com.adm.eduMgr.vo.Baseline" resultType="egovframework.com.adm.eduMgr.vo.Baseline">
		SELECT PROC_CD
			,PROC_YEAR
			,PROC_SEQ
			,MODULE_ID
			,EDU_START_DATE
			,EDU_END_DATE
			,TOT_STUDY_DATE
			,LIMIT_PERSON_CNT
			,ENDING_STD_SCORE
			,ENDING_PROCESS_END_YN
			,INSERT_DATE
			,INSERT_ID
			,UPDATE_DATE
			,UPDATE_ID
		FROM XBT_BASELINE
		WHERE PROC_CD = #{procCd}
	</select>		
	
	<!-- 차수 등록 -->
	<insert id="insertBaseline" parameterType="egovframework.com.adm.eduMgr.vo.Baseline">
		INSERT INTO XBT_BASELINE(
			PROC_YEAR,
			PROC_SEQ,
			MODULE_ID,
			EDU_START_DATE,
			EDU_END_DATE,
			TOT_STUDY_DATE,
			LIMIT_PERSON_CNT,
			ENDING_STD_SCORE,
			ENDING_PROCESS_END_YN,
			INSERT_DATE,
			INSERT_ID,
			UPDATE_DATE,
			UPDATE_ID
		)VALUES(
			#{procYear}
			,#{procSeq}
			,#{moduleId}
			,#{eduStartDate}
			,#{eduEndDate}
			,#{totStudyDate}
			,#{limitPersonCnt}
			,#{endingStdScore}
			,#{endingProcessEndYn}
			,now()
			,#{insertId}
		)
	</insert>	
	
	
	<!-- 차수 수정 -->
	<update id="updateBaseline" parameterType="egovframework.com.adm.eduMgr.vo.Baseline">	
		UPDATE XBT_BASELINE
		SET 
			PROC_YEAR = #{procYear},
			PROC_SEQ = #{procSeq},
			MODULE_ID = #{moduleId},
			EDU_START_DATE = #{eduStartDate},
			EDU_END_DATE = #{eduEndDate},
			TOT_STUDY_DATE = #{totStudyDate},
			LIMIT_PERSON_CNT = #{limitPersonCnt},
			ENDING_STD_SCORE = #{endingStdScore},
			ENDING_PROCESS_END_YN = #{endingProcessEndYn},
			UPDATE_DATE = #{insertId},
			UPDATE_ID = now()
		WHERE PROC_CD = #{procCd}
	</update>	
	
	<!-- 차수 삭제-->
	<delete id="deleteBaseline" parameterType="egovframework.com.adm.eduMgr.vo.Baseline">
		DELETE FROM XBT_BASELINE WHERE MODULE_ID = #{ModuleId}  
	</delete>	
	
	<!-- 교육생목로조회 -->
	<select id="selectBaselineStudentList" parameterType="egovframework.com.adm.eduMgr.vo.Student" resultType="egovframework.com.adm.eduMgr.vo.Student">
		SELECT 
			STUDENT_NO,
			PROC_CD,
			PROC_YEAR,
			PROC_SEQ,
			USER_ID,
			PROC_NM,
			COMP_NM,
			DEPT_CD,
			DEPT_NM,
			GAIN_SCORE,
			PASS_YN,
			ENDING_PROCESS_DATE,
			ENDING_YN,
			INSERT_DATE,
			INSERT_ID,
			UPDATE_DATE,
			UPDATE_ID
		FROM XBT_BASELINE_STUDENT_INFO
	</select>	
	
			
	<!-- 교육생 등록 -->
	<insert id="insertBaselineStudent" parameterType="egovframework.com.adm.eduMgr.vo.Student">
		INSERT INTO XBT_BASELINE_STUDENT_INFO(
			PROC_CD,
			PROC_YEAR,
			PROC_SEQ,
			USER_ID,
			PROC_NM,
			COMP_NM,
			DEPT_CD,
			DEPT_NM,
			GAIN_SCORE,
			PASS_YN,
			ENDING_PROCESS_DATE,
			ENDING_YN,
			INSERT_DATE,
			INSERT_ID
		)VALUES(
			#{procCd}
			,#{procYear}
			,#{procSeq}
			,#{userId}
			,#{procNm}
			,#{compNm}
			,#{deptCd}
			,#{deptNm}
			,#{gainScore}
			,#{passYn}
			,#{endingProcessDate}
			,#{endingYn}
			,now()
			,#{insertId}
		)
	
	</insert>	
	
	
	<!-- 교육생 삭제-->
	<delete id="deleteBaselineStudent" parameterType="egovframework.com.adm.eduMgr.vo.Student">
		DELETE FROM XBT_BASELINE_STUDENT_INFO WHERE USER_ID = #{userId}
	</delete>	
	
	
	
	
	<!-- 교육일정 목록 -->
	<select id="selectEduDateList" parameterType="egovframework.com.adm.eduMgr.vo.EduDate" resultType="egovframework.com.adm.eduMgr.vo.EduDate">
		SELECT 
			DAY_NO,
			PROC_CD,
			PROC_NM,
			MODULE_ID,
			USER_ID,
			EDU_DATE,
			INSERT_ID,
			INSERT_DATE
		FROM XBT_BASELINE_EDU_DATE
	</select>		

	
	<!-- 교육일정 등록 -->
	<insert id="insertEduDate" parameterType="egovframework.com.adm.eduMgr.vo.EduDate">
		INSERT INTO XBT_BASELINE_EDU_DATE(
			PROC_CD,
			PROC_NM,
			MODULE_ID,
			USER_ID,
			EDU_DATE,
			INSERT_ID,
			INSERT_DATE
		)VALUES(
			#{procCd}
			,#{procNm}
			,#{moduleId}
			,#{userId}
			,#{eduDate}
			,#{insertId}
			,now()
		)
	
	</insert>	
	
	
	<!-- 교육일정 삭제-->
	<delete id="deleteEduDate" parameterType="egovframework.com.adm.eduMgr.vo.EduDate">
		DELETE FROM XBT_BASELINE_EDU_DATE WHERE DAY_NO = #{dayNo}
	</delete>	
	
	
	
			
	
</mapper>