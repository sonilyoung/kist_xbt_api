<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.adm.learningMgr.dao.LearningMgrDAO">
	
	<!-- 학습관리-->
	
	<!-- XRAY 판독모듈 정보조회-->
	<select id="getXrayModuleList" parameterType="egovframework.com.adm.learningMgr.vo.EduModule" resultType="egovframework.com.adm.learningMgr.vo.EduModule" >	
		<!--
			SELECT MODULE_ID,
			MODULE_NM,
			MODULE_DESC,
			GUN_CNT,
			EXPLOSIVES_CNT,
			LIVE_AMMUNITION_CNT,
			SWORD_CNT,
			WEAPON_CNT,
			CAMOUFLAGE_WEAPON_CNT,
			TOOL_LIFE_CNT,
			FLAMMABILITY_CNT,
			DANGER_MATERIALS_CNT,
			LIQUID_GEL_CNT,
			PASS_CNT,
			STUDY_LVL,
			SLIDE_SPEED,
			MODULE_TYPE,
			USE_YN,
			QUESTION_CNT,
			GUN_SCORE,
			EXPLOSIVES_SCORE,
			LIVE_AMMUNITION_SCORE,
			SWORD_SCORE,
			WEAPON_SCORE,
			CAMOUFLAGE_WEAPON_SCORE,
			TOOL_LIFE_SCORE,
			FLAMMABILITY_SCORE,
			DANGER_MATERIALS_SCORE,
			LIQUID_GEL_SCORE,
			PASS_SCORE,
			TOTAL_SCORE,
			INSERT_ID,
			INSERT_DATE,
			UPDATE_ID,
			UPDATE_DATE
		FROM XBT_MODULE_INFO
		-->
		
		SELECT 
			MODULE_ID,
			MODULE_NM,
			MODULE_DESC,
			STUDY_LVL,
			SLIDE_SPEED,
			MODULE_TYPE,			
			ACTION_DIV0_COUNT,
			ACTION_DIV1_COUNT,
			ACTION_DIV2_COUNT,
			ACTION_DIV3_COUNT,
			ACTION_DIV4_COUNT,
			ACTION_DIV0_SCORE,
			ACTION_DIV1_SCORE,
			ACTION_DIV2_SCORE,
			ACTION_DIV3_SCORE,
			ACTION_DIV4_SCORE,
			USE_YN,
			QUESTION_CNT,
			INSERT_ID,
			INSERT_DATE,
			UPDATE_ID,
			UPDATE_DATE
		FROM XBT_MODULE_INFO		
	</select>		
	
	<!-- 모듈 상세 -->
	<select id="selectModule" parameterType="egovframework.com.adm.learningMgr.vo.EduModule" resultType="egovframework.com.adm.learningMgr.vo.EduModule">
		SELECT 
			MODULE_ID,
			MODULE_NM,
			MODULE_DESC,
			STUDY_LVL,
			SLIDE_SPEED,
			MODULE_TYPE,			
			ACTION_DIV0_COUNT,
			ACTION_DIV1_COUNT,
			ACTION_DIV2_COUNT,
			ACTION_DIV3_COUNT,
			ACTION_DIV4_COUNT,
			ACTION_DIV0_SCORE,
			ACTION_DIV1_SCORE,
			ACTION_DIV2_SCORE,
			ACTION_DIV3_SCORE,
			ACTION_DIV4_SCORE,
			USE_YN,
			QUESTION_CNT,
			INSERT_ID,
			INSERT_DATE,
			UPDATE_ID,
			UPDATE_DATE		
		FROM XBT_MODULE_INFO
		WHERE MODULE_ID = #{moduleId}	
	</select>		
	
	<!-- 모듈 등록 -->
	<insert id="insertModule" parameterType="egovframework.com.adm.learningMgr.vo.EduModule">
		INSERT INTO XBT_MODULE_INFO(
			MODULE_NM,
			MODULE_DESC,
			STUDY_LVL,
			SLIDE_SPEED,
			MODULE_TYPE,			
			ACTION_DIV0_COUNT,
			ACTION_DIV1_COUNT,
			ACTION_DIV2_COUNT,
			ACTION_DIV3_COUNT,
			ACTION_DIV4_COUNT,
			ACTION_DIV0_SCORE,
			ACTION_DIV1_SCORE,
			ACTION_DIV2_SCORE,
			ACTION_DIV3_SCORE,
			ACTION_DIV4_SCORE,
			USE_YN,
			QUESTION_CNT,
			INSERT_ID,
			INSERT_DATE,
		)VALUES(
			#{moduleNm}
			,#{moduleDesc}
			,#{studyLvl}
			,#{slideSpeed}
			,#{moduleType}
			,#{actionDiv0Count}
			,#{actionDiv1Count}
			,#{actionDiv2Count}
			,#{actionDiv3Count}
			,#{actionDiv4Count}
			,#{actionDiv0Score}
			,#{actionDiv1Score}
			,#{actionDiv2Score}
			,#{actionDiv3Score}
			,#{actionDiv4Score}
			,#{useYn}
			,#{questionCnt}
			,#{insertId}
			,now()
		)
	</insert>	
	
	
	<!-- 모듈 수정 -->
	<update id="updateModule" parameterType="egovframework.com.adm.learningMgr.vo.EduModule">	
		UPDATE XBT_MODULE_INFO SET 
			MODULE_NM = #{moduleNm},
			MODULE_DESC = #{moduleDesc},
			STUDY_LVL = #{studyLvl},
			SLIDE_SPEED = #{slideSpeed},
			MODULE_TYPE = #{moduleType},
			ACTION_DIV0_COUNT = #{actionDiv0Count},
			ACTION_DIV1_COUNT = #{actionDiv1Count},
			ACTION_DIV2_COUNT = #{actionDiv2Count},
			ACTION_DIV3_COUNT = #{actionDiv3Count},
			ACTION_DIV4_COUNT = #{actionDiv4Count},
			ACTION_DIV0_SCORE = #{actionDiv0Score},
			ACTION_DIV1_SCORE = #{actionDiv1Score},
			ACTION_DIV2_SCORE = #{actionDiv2Score},
			ACTION_DIV3_SCORE = #{actionDiv3Score},
			ACTION_DIV4_SCORE = #{actionDiv4Score},
			USE_YN = #{useYn},
			QUESTION_CNT = #{questionCnt},
			UPDATE_ID = #{updateId},
			UPDATE_DATE = now()
		WHERE MODULE_ID = #{moduleId}
	</update>	
	
	<!-- 모듈 삭제-->
	<delete id="deleteModule" parameterType="egovframework.com.adm.learningMgr.vo.EduModule">
		DELETE FROM XBT_MODULE_INFO WHERE MODULE_ID =  #{moduleId}
	</delete>				
			
			
	<!-- XRAY 판독 배점관리 조회-->
	<select id="getXrayPointList" parameterType="egovframework.com.adm.learningMgr.vo.XrayPoint" resultType="egovframework.com.adm.learningMgr.vo.XrayPoint" >			
        SELECT 
           POINTS_STD_ID                                             /* 배점기준ID */
          ,POINTS_STD_NM                                             /* 배점기준명칭 */
          ,POINTS_STD_DC                                             /* 배점기준설명 */
          ,USE_YN                                                    /* 사용여부 */              
        FROM xbt_POINTS_STD_INFO                                       /* XBT배점기준정보 Table */
	    ORDER BY POINTS_STD_ID                                          /* 배점기준ID */			     
	</select>     
	   
	<!-- XRAY 판독 배점관리 하위 조회-->
	<select id="getXrayPointDetailList" parameterType="egovframework.com.adm.learningMgr.vo.XrayPointDetail" resultType="egovframework.com.adm.learningMgr.vo.XrayPointDetail" >	     
         SELECT 
		    POINTS_STD_ID /* 배점기준ID */
           ,ACTION_DIV                     AS ACTION_DIV /* ACTION구분 */
		   ,FN_GET_COMCODE_NAME('0002', ACTION_DIV ,'kor')    AS ACTION_NM /* ACTION구분명 */
		   ,NVL(BAN_UNIT_SCORE,0)                      AS BAN_UNIT_SCORE /* 금지물품점수 */
		   ,NVL(LIMIT_UNIT_SCORE,0)                    AS LIMIT_UNIT_SCORE /* 제한물품점수 */
		   ,NVL(QUESTION_UNIT_SCORE,0)                 AS QUESTION_UNIT_SCORE /* 의심물품점수 */
		   ,NVL(PASS_UNIT_SCORE,0)                     AS PASS_UNIT_SCORE /* 통과물품점수 */
	     FROM xbt_POINTS_STD_DC t1                                                                                    
	</select>            			
			
			
	
	<!-- 교육타입관리-->  	 	
	<select id="getEduTypeList" parameterType="egovframework.com.adm.learningMgr.vo.EduType" resultType="egovframework.com.adm.learningMgr.vo.EduType" >
		  SELECT
			   A.EDU_TYPE_ID                                               /* 교육타입ID */			  
              ,A.EDU_TYPE_NM                                               /* 교육타입명칭 */
              ,A.EDU_TYPE_DC                                               /* 교육타입설명 */
              ,A.USE_YN                                                    /* 사용여부 */
			  ,A.POINTS_STD_ID                   /* 배점기준ID */
			  ,B.POINTS_STD_NM                   /* 배점기준명칭 */
			  ,A.INSERT_ID /* 등록자ID */
			  ,A.INSERT_DATE /* 등록일 */
			  ,A.UPDATE_ID /* 수정자ID */
			  ,A.UPDATE_DATE /* 수정일 */
		  FROM xbt_EDU_TYPE_INFO A                                         /* XTS교육타입상세 TABLE */
		  LEFT JOIN xbt_POINTS_STD_INFO B
		  ON A.POINTS_STD_ID = B.POINTS_STD_ID 
	</select>	
				
			
</mapper>